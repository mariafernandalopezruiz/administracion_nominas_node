<div class="container">
    <div class="box">
        <h1 class="title is-4"><%= payroll ? "Editar Nómina" : "Agregar Nueva Nómina" %></h1>
        <form action="<%= payroll ? `/payrolls/edit/${payroll.id}` : '/payrolls/create' %>" method="POST">
            <div class="field">
                <label class="label" for="employee_id">Empleado</label>
                <div class="control">
                    <div class="select is-fullwidth">
                        <select id="employee_id" name="employee_id" required>
                            <% employees.forEach(employee => { %>
                                <option value="<%= employee.id %>" <%= payroll && payroll.employee_id === employee.id ? "selected" : "" %>>
                                    <%= employee.name %>
                                </option>
                            <% }) %>
                        </select>
                    </div>
                </div>
            </div>

            <div class="field">
                <label class="label" for="salary">Salario</label>
                <div class="control">
                    <input
                        class="input"
                        type="number"
                        id="salary"
                        name="salary"
                        placeholder="Salario"
                        value="<%= payroll ? payroll.salary : '' %>"
                        required
                    />
                </div>
            </div>

            <div class="field">
                <label class="label" for="bonus">Bono</label>
                <div class="control">
                    <input
                        class="input"
                        type="number"
                        id="bonus"
                        name="bonus"
                        placeholder="Bono"
                        value="<%= payroll ? payroll.bonus : '' %>"
                    />
                </div>
            </div>

            <div class="field">
                <label class="label" for="deductions">Deducciones</label>
                <div class="control">
                    <input
                        class="input"
                        type="number"
                        id="deductions"
                        name="deductions"
                        placeholder="Deducciones"
                        value="<%= payroll ? payroll.deductions : '' %>"
                    />
                </div>
            </div>

            <div class="field">
                <label class="label" for="payment_date">Fecha de Pago</label>
                <div class="control">
                    <input
                        class="input"
                        type="date"
                        id="payment_date"
                        name="payment_date"
                        value="<%= payroll ? payroll.payment_date : '' %>"
                        required
                    />
                </div>
            </div>

            <div class="field is-grouped">
                <div class="control">
                    <button class="button is-link" type="submit">Guardar</button>
                </div>
                <div class="control">
                    <a href="/payrolls" class="button is-light">Cancelar</a>
                </div>
            </div>
        </form>
    </div>
</div>
