<div class="container">
    <div class="box">
        <h1 class="title is-4">Empleados</h1>

        <!-- Tabla de empleados -->
        <table class="table is-bordered is-hoverable is-fullwidth">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Nombre</th>
                    <th>Puesto</th>
                    <th>Departamento</th>
                    <th>Email</th>
                    <th>Teléfono</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <% employees.forEach((employee, index) => { %>
                    <tr>
                        <td><%= index + 1 %></td>
                        <td><%= employee.name %></td>
                        <td><%= employee.position %></td>
                        <td><%= employee.department %></td>
                        <td><%= employee.email %></td>
                        <td><%= employee.phone %></td>
                        <td>
                            <a href="/employees/edit/<%= employee.id %>" class="button is-small is-info">Editar</a>
                            <a href="/employees/delete/<%= employee.id %>" class="button is-small is-danger delete-button">Eliminar</a>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>

        <a href="/employees/create" class="button is-link mt-3">Agregar Nuevo Empleado</a>
    </div>
</div>

<script>
    document.querySelectorAll('.delete-button').forEach(button => {
        button.addEventListener('click', (e) => {
            e.preventDefault();
            const href = button.getAttribute('href');
            Swal.fire({
                title: '¿Estás seguro?',
                text: "Esta acción no se puede deshacer.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Sí, eliminar',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = href;
                }
            });
        });
    });
</script>
